<div
  *ngIf="item"
  [ngClass]="editMode ? 'edit' : ''"
  (clickOutside)="editMode = false"
>
  <form [formGroup]="form">
    <div class="checklist-item">
      <ui-checkbox formControlName="completed"></ui-checkbox>
      <div *ngIf="!editMode" (click)="onItemClick()" class="title-preview">
        {{ item.title }}
      </div>
      <ui-input *ngIf="editMode" formControlName="title" #titleInput></ui-input>
    </div>
    <div *ngIf="editMode" class="buttons">
      <div>
        <ui-button className="primary" (click)="onSaveItem()">Save</ui-button>
        <ui-icon
          class="ml-2 pointer"
          [icon]="Icons.Times"
          (click)="editMode = false"
        ></ui-icon>
      </div>
      <ui-icon
        class="pointer"
        [icon]="Icons.EllipsisH"
        (click)="menu.onToggle($event)"
      ></ui-icon>
    </div>
  </form>

  <ui-icon
    *ngIf="!editMode && showMenuIcon"
    class="pointer"
    [icon]="Icons.EllipsisH"
    (click)="menu.onToggle($event)"
  ></ui-icon>
  <ui-menu #menu [menus]="itemMenu" [title]="'Item actions'"></ui-menu>
</div>
